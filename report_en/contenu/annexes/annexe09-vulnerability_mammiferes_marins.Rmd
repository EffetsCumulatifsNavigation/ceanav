# Appendix 9 {.unnumbered #annexe9}

```{r fnccriteresmm, results = 'asis'}
tab <- function(nm, fr) {
  meta <- read.csv("../data/data-metadata/metadata_stresseurs.csv")
  dat <- read.csv(glue("../data/data-raw/data0064-vulnerabilite_mammiferes_marins/vulnerabilite_{nm}.csv"))

  dat <- left_join(meta[,c("accronyme","english")], dat, by = c("accronyme" = "categories")) %>%
         select(-accronyme)

  # Adjust column names
  # WARNING: This is ugly but it works...
  nm <- colnames(dat)
  nm[1] <- "Environmental stressors"
  nm <- gsub("frequence","Frequency", nm)
  nm <- gsub("direct","Direct or indirect effects", nm)
  nm <- gsub("resistance","Resistance", nm)
  nm <- gsub("retablissement","Recovery time", nm)
  nm <- gsub("reproduction","Effect of reproduction", nm)
  nm <- gsub("population","Effect on the population", nm)
  nm <- gsub("statut","Status of the species", nm)
  nm <- gsub("residente","Resident species", nm)
  colnames(dat) <- nm

  cat(glue("Evaluation of the vulnerability criteria for {fr} to environmental stressors. Refer to table \\@ref(tab:vulnerabilitySpecies) for more details on criteria."))
  dat %>%
    knitr::kable(
      align = c("l", rep("c", (ncol(dat)-1)))#,
      # caption = glue("Évaluation des critères de vulnérabilité du {fr} aux stresseurs environnementaux. Référez au tableau \\@ref(tab:vulnerabilitySpecies) pour plus de détails sur les critères.")
   ) #%>%
   #kableExtra::kable_styling(font_size = 10)
}
```

<br/>

<div style="overflow-x:auto;">
```{r belugacriteres, results = 'asis'}
tab("beluga", "St. Lawrence beluga whale (*Delphinapterus leucas*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r harbourpurpoisecriteres, results = 'asis'}
tab("harbour_porpoise", "harbour porpoise (*Phocoena phocoena*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r petitrorqualcriteres, results = 'asis'}
tab("petit_rorqual", "minke whale (*Balaenoptera acutorostrata*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r harborsealcriteres, results = 'asis'}
tab("harbor_seal", "harbor seal (*Phoca vitulina*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r harpsealcriteres, results = 'asis'}
tab("harp_seal", "harp seal (*Phoca groenlandica*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r greysealcriteres, results = 'asis'}
tab("grey_seal", "grey seal (*Halichoerus grypus*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r rorqualabossecriteres, results = 'asis'}
tab("rorqual_a_bosse", "humpback whale (*Megaptera novaeangliae*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r rorqualbleucriteres, results = 'asis'}
tab("rorqual_bleu", "blue whale (*Balaenoptera musculus*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r rorqualcommuncriteres, results = 'asis'}
tab("rorqual_commun", "fin whale (*Balaenoptera physalus*)")
```
</div>

<br/>
