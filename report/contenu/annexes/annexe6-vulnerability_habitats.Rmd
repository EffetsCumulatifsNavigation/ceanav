# Annexe 6 {-}

```{r fnccriteresspecies}
tab <- function(nm, fr) {
  meta <- read.csv("../data/data-metadata/metadata_stresseurs.csv")
  dat <- read.csv(glue("../data/data-raw/data0063-vulnerabilite_faune_flore/vulnerabilite_{nm}.csv"))

  dat <- left_join(meta[,c("accronyme","francais")], dat, by = c("accronyme" = "categories")) %>%
         select(-accronyme)

  # Adjust column names
  # WARNING: This is ugly but it works...
  nm <- colnames(dat)
  nm[1] <- "Stresseurs environnementaux"
  nm <- gsub("frequence","Fréquence", nm)
  nm <- gsub("direct","Effet direct ou indirect", nm)
  nm <- gsub("resistance","Résistance", nm)
  nm <- gsub("retablissement","Temps de rétablissement", nm)
  nm <- gsub("reproduction","Effet sur la reproduction", nm)
  nm <- gsub("population","Effet sur la population", nm)
  nm <- gsub("statut","Statut de l'espèce", nm)
  nm <- gsub("residente","Espèce résidente", nm)
  colnames(dat) <- nm

  dat %>%
    knitr::kable(
      align = c("l", rep("c", (ncol(dat)-1))),
      caption = glue("Évaluation des critères de vulnérabilité des {fr} aux stresseurs environnementaux. Référez au tableau \\@ref(tab:vulnerabilitySpecies) pour plus de détails sur les critères.")
   )
}
```

<br/>

```{r frayerecriteres}
tab("frayere","frayères")
```

<br/>

```{r alevinagecriteres}
tab("site_alevinage","sites d'alevinage")
```

<br/>

```{r oiseauxcriteres}
tab("oiseaux","oiseaux marins")
```

<br/>

```{r susceptiblecriteres}
tab("statut_susceptible","espèces fauniques et floristiques susceptibles")
```

<br/>

```{r vulnerablecriteres}
tab("statut_vulnerable","espèces fauniques et floristiques vulnérables")
```

<br/>

```{r menaceecriteres}
tab("statut_menace","espèces fauniques et floristiques menacées")
```

<br/>
