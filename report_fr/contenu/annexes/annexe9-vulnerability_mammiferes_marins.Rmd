# Annexe 9 {.unnumbered #annexe9}

```{r fnccriteresmm, results = 'asis'}
tab <- function(nm, fr) {
  meta <- read.csv("../data/data-metadata/metadata_stresseurs.csv")
  dat <- read.csv(glue("../data/data-raw/data0064-vulnerabilite_mammiferes_marins/vulnerabilite_{nm}.csv"))

  dat <- left_join(meta[,c("accronyme","francais")], dat, by = c("accronyme" = "categories")) %>%
         select(-accronyme)

  # Adjust column names
  # WARNING: This is ugly but it works...
  nm <- colnames(dat)
  nm[1] <- "Stresseurs environnementaux"
  nm <- gsub("frequence","Fréquence", nm)
  nm <- gsub("direct","Effet direct ou indirect", nm)
  nm <- gsub("resistance","Résistance", nm)
  nm <- gsub("retablissement","Temps de rétablissement", nm)
  nm <- gsub("reproduction","Effet sur la reproduction", nm)
  nm <- gsub("population","Effet sur la population", nm)
  nm <- gsub("statut","Statut de l'espèce", nm)
  nm <- gsub("residente","Espèce résidente", nm)
  colnames(dat) <- nm

  cat(glue("Évaluation des critères de vulnérabilité du {fr} aux stresseurs environnementaux. Référez au tableau \\@ref(tab:vulnerabilitySpecies) pour plus de détails sur les critères."))
  dat %>%
    knitr::kable(
      align = c("l", rep("c", (ncol(dat)-1)))#,
      # caption = glue("Évaluation des critères de vulnérabilité du {fr} aux stresseurs environnementaux. Référez au tableau \\@ref(tab:vulnerabilitySpecies) pour plus de détails sur les critères.")
   ) #%>%
   #kableExtra::kable_styling(font_size = 10)
}
```

<br/>

<div style="overflow-x:auto;">
```{r belugacriteres, results = 'asis'}
tab("beluga", "béluga (*Delphinapterus leucas*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r harbourpurpoisecriteres, results = 'asis'}
tab("harbour_porpoise", "marsouin commun (*Phocoena phocoena*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r petitrorqualcriteres, results = 'asis'}
tab("petit_rorqual", "petit rorqual (*Balaenoptera acutorostrata*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r harborsealcriteres, results = 'asis'}
tab("harbor_seal", "phoque commun (*Phoca vitulina*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r harpsealcriteres, results = 'asis'}
tab("harp_seal", "phoque du Groenland (*Phoca groenlandica*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r greysealcriteres, results = 'asis'}
tab("grey_seal", "phoque gris (*Halichoerus grypus*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r rorqualabossecriteres, results = 'asis'}
tab("rorqual_a_bosse", "rorqual à bosse (*Megaptera novaeangliae*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r rorqualbleucriteres, results = 'asis'}
tab("rorqual_bleu", "rorqual bleu (*Balaenoptera musculus*)")
```
</div>

<br/>

<div style="overflow-x:auto;">
```{r rorqualcommuncriteres, results = 'asis'}
tab("rorqual_commun", "rorqual commun (*Balaenoptera physalus*)")
```
</div>

<br/>
